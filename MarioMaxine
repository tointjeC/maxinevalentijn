<!DOCTYPE html>         
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Antoine Bros - World 1-1</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #5C94FC; font-family: 'Arial', sans-serif; }
        canvas { display: block; }
        #ui { position: fixed; top: 10px; width: 100%; text-align: center; color: white; font-size: 24px; font-weight: bold; text-shadow: 2px 2px #000; z-index: 10; }
        #stats { position: fixed; top: 10px; left: 20px; color: white; font-size: 24px; text-shadow: 2px 2px #000; z-index: 10; }
    </style>
</head>
<body>
    <div id="stats">ANTOINE<br>000000  ❤️ x <span id="livesCount">3</span></div>
    <div id="ui">WORLD 1-1</div>
    <canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const spriteSheet = new Image();
spriteSheet.src = 'sprites.png'; 
spriteSheet.onload = () => { update(); };

let score = 0;
let lives = 3;
const gravity = 0.8;
let winState = false;

const player = {
    x: 100, y: 100, width: 60, height: 80,
    dy: 0, jumpForce: -16, grounded: false, speed: 7,
    frameX: 0, jumpsLeft: 2
};

let coins = [];
let blocks = []; // Vraagtekenblokken
let platforms = [];
let enemies = [];

function initWorld() {
    platforms = [
        {x: 0, y: canvas.height-80, w: 2000, h: 80},   // Grond stuk 1
        {x: 2200, y: canvas.height-80, w: 1500, h: 80}, // Gat en dan grond
        {x: 4000, y: canvas.height-80, w: 3000, h: 80},
        {x: 300, y: canvas.height-300, w: 150, h: 40},  // Zwevend plateau
    ];

    // Voeg vraagtekenblokken toe
    for(let i=0; i<10; i++) {
        blocks.push({x: 800 + (i*400), y: canvas.height-400, w: 50, h: 50, hit: false});
    }

    // Voeg muntjes toe
    for(let i=0; i<20; i++) {
        coins.push({x: 500 + (i*300), y: canvas.height-250, collected: false});
    }

    // Monsters (Arthur & Felix als Mario-vijanden)
    enemies = [
        {x: 1000, y: canvas.height-180, w: 80, h: 100, speedX: 2, range: 300, startX: 1000},
        {x: 2500, y: canvas.height-180, w: 80, h: 100, speedX: 2.5, range: 400, startX: 2500}
    ];
}

function update() {
    if(winState) return draw();

    // Besturing
    if(window.keys && window.keys['ArrowRight']) player.x += player.speed;
    if(window.keys && window.keys['ArrowLeft']) player.x -= player.speed;

    player.dy += gravity;
    player.y += player.dy;

    // Grond/Platform Collision
    player.grounded = false;
    platforms.forEach(p => {
        if(player.x < p.x+p.w && player.x+player.width > p.x && player.y+player.height > p.y && player.y+player.height < p.y+p.h && player.dy >= 0) {
            player.y = p.y - player.height; player.dy = 0; player.grounded = true; player.jumpsLeft = 2;
        }
    });

    // Blokken (Headbutt check)
    blocks.forEach(b => {
        // Check onderkant raken
        if(player.x < b.x+b.w && player.x+player.width > b.x && player.y < b.y+b.h && player.y > b.y && player.dy < 0) {
            if(!b.hit) { b.hit = true; score += 100; player.dy = 2; }
        }
    });

    // Muntjes pakken
    coins.forEach(c => {
        if(!c.collected && Math.abs(player.x - c.x) < 40 && Math.abs(player.y - c.y) < 80) {
            c.collected = true; score += 50;
        }
    });

    // Dood door vallen
    if(player.y > canvas.height) {
        lives--;
        player.x = 100; player.y = 100;
        document.getElementById('livesCount').innerText = lives;
        if(lives <= 0) location.reload();
    }

    draw();
    requestAnimationFrame(update);
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const camX = player.x - canvas.width/4;

    ctx.save();
    ctx.translate(-camX, 0);

    // Teken Grond (Mario stijl bruin/oranje)
    ctx.fillStyle = "#C84C0C";
    platforms.forEach(p => {
        ctx.fillRect(p.x, p.y, p.w, p.h);
        ctx.strokeStyle = "black"; ctx.strokeRect(p.x, p.y, p.w, p.h);
    });

    // Teken Muntjes
    ctx.fillStyle = "#F8D824";
    coins.forEach(c => {
        if(!c.collected) {
            ctx.beginPath(); ctx.ellipse(c.x, c.y, 10, 15, 0, 0, Math.PI*2); ctx.fill();
        }
    });

    // Teken Blokken
    blocks.forEach(b => {
        ctx.fillStyle = b.hit ? "#949494" : "#F8D824";
        ctx.fillRect(b.x, b.y, b.w, b.h);
        ctx.strokeStyle = "white"; ctx.strokeRect(b.x, b.y, b.w, b.h);
        if(!b.hit) { ctx.fillStyle = "black"; ctx.font = "bold 30px Arial"; ctx.fillText("?", b.x+15, b.y+35); }
    });

    // Antoine
    ctx.drawImage(spriteSheet, 0, 150, 200, 300, player.x, player.y, player.width, player.height);

    ctx.restore();
}

window.keys = {};
window.addEventListener('keydown', e => {
    window.keys[e.code] = true;
    if(e.code === 'ArrowUp' && player.jumpsLeft > 0) {
        player.dy = player.jumpForce;
        player.jumpsLeft--;
    }
});
window.addEventListener('keyup', e => window.keys[e.code] = false);

initWorld();
</script>
</body>
</html>
